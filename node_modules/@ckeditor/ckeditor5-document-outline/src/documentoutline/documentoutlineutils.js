/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x2cdd=['_getOutlineDefinitions','backward','name','getFirstPosition','_getHeadingNames','fire','level','DocumentOutlineUtils','length','text','get','pluginName','item','includes','editing','createElement','_headingNames','documentOutline.headings','domConverter','data','element','_deriveHeadingElementsFromConversion','activeItemIndex','domToView','getChildren','modelElement','model','getRoot','toModel','findIndex','_getActiveHeading','editor','document','change','afterInit','selection','push','config'];(function(_0x22cc1b,_0x2cdd29){const _0x31a93e=function(_0x4e39c3){while(--_0x4e39c3){_0x22cc1b['push'](_0x22cc1b['shift']());}};_0x31a93e(++_0x2cdd29);}(_0x2cdd,0xf6));const _0x31a9=function(_0x22cc1b,_0x2cdd29){_0x22cc1b=_0x22cc1b-0x0;let _0x31a93e=_0x2cdd[_0x22cc1b];return _0x31a93e;};import{Plugin as _0x303205}from'ckeditor5/src/core.js';import{debounce as _0x32d05d}from'lodash-es';import{TreeWalker as _0x184a6e}from'ckeditor5/src/engine.js';import{getElementText as _0x1a59bc,getDefaultFeatureHeadingNames as _0x35ad3e}from'./utils.js';import{diff as _0x53517a,diffToChanges as _0x15e3b4}from'ckeditor5/src/utils.js';export default class n extends _0x303205{constructor(){super(...arguments),this[_0x31a9('0x24')]=[];}static get[_0x31a9('0x1f')](){return _0x31a9('0x1b');}['init'](){const _0x4f3943=this['editor'];this['_headingNames']=this[_0x31a9('0x18')]();let _0x499ea5=[];_0x4f3943[_0x31a9('0x8')]['document']['on']('change',_0x32d05d(()=>{const _0xf77138=_0x499ea5;_0x499ea5=this[_0x31a9('0x14')]();const _0x1dc493=_0x53517a(_0xf77138,_0x499ea5,(_0x5d0630,_0x23a03e)=>_0x5d0630[_0x31a9('0x1a')]===_0x23a03e[_0x31a9('0x1a')]&&_0x5d0630[_0x31a9('0x1d')]===_0x23a03e[_0x31a9('0x1d')]&&_0x5d0630[_0x31a9('0x7')]===_0x23a03e[_0x31a9('0x7')]),_0x253c57=_0x15e3b4(_0x1dc493,_0x499ea5),_0xc1bcc7=this[_0x31a9('0xc')](),_0x36071d=_0x499ea5[_0x31a9('0xb')](_0x26d3e4=>_0x26d3e4[_0x31a9('0x7')]===_0xc1bcc7);_0x253c57[_0x31a9('0x1c')]&&this[_0x31a9('0x19')](_0x31a9('0xf'),{'outlineDefinitions':_0x499ea5,'activeItemIndex':_0x36071d,'outlineChanges':_0x253c57}),this[_0x31a9('0x19')](_0x31a9('0x4'),{'index':_0x36071d});},0xfa,{'leading':!0x0,'trailing':!0x0}));}[_0x31a9('0x10')](){this[_0x31a9('0x24')][_0x31a9('0x1c')]||this[_0x31a9('0x3')]();}[_0x31a9('0x14')](){const _0x5b2396=this['editor'],_0x4d0ed7=[],_0x57beb0=this[_0x31a9('0x24')];for(const _0x530025 of _0x5b2396[_0x31a9('0x8')][_0x31a9('0xe')]['getRootNames']())_0x2f0e72(_0x5b2396[_0x31a9('0x8')][_0x31a9('0xe')][_0x31a9('0x9')](_0x530025));function _0x2f0e72(_0x172f3c){for(const _0x37da30 of _0x172f3c[_0x31a9('0x6')]())_0x37da30['is'](_0x31a9('0x2'))&&(_0x57beb0[_0x31a9('0x21')](_0x37da30[_0x31a9('0x16')])&&_0x4d0ed7[_0x31a9('0x12')]({'level':_0x57beb0['indexOf'](_0x37da30['name'])+0x1,'text':_0x1a59bc(_0x37da30),'modelElement':_0x37da30}),_0x2f0e72(_0x37da30));}return _0x4d0ed7;}[_0x31a9('0xc')](){const _0x5aab84=this[_0x31a9('0xd')][_0x31a9('0x8')][_0x31a9('0xe')][_0x31a9('0x11')][_0x31a9('0x17')](),_0x7f2234=new _0x184a6e({'direction':_0x31a9('0x15'),'startPosition':_0x5aab84});for(const _0x4ee7fe of _0x7f2234)if(_0x4ee7fe[_0x31a9('0x20')]['is']('element')&&this['_headingNames']['includes'](_0x4ee7fe[_0x31a9('0x20')][_0x31a9('0x16')]))return _0x4ee7fe[_0x31a9('0x20')];}[_0x31a9('0x18')](){const _0xf48f5=this[_0x31a9('0xd')][_0x31a9('0x13')][_0x31a9('0x1e')](_0x31a9('0x25'));return _0xf48f5||_0x35ad3e(this['editor']);}[_0x31a9('0x3')](){const _0x48768a=this[_0x31a9('0xd')],_0x3697e4=['h1','h2','h3','h4','h5','h6'],_0x258a98=[];for(const _0x726b38 of _0x3697e4){const _0x157ba6=_0x48768a[_0x31a9('0x22')]['view'][_0x31a9('0x0')][_0x31a9('0x5')](document[_0x31a9('0x23')](_0x726b38)),_0x4e9ba6=_0x48768a[_0x31a9('0x1')][_0x31a9('0xa')](_0x157ba6)['getChild'](0x0);(null==_0x4e9ba6?void 0x0:_0x4e9ba6['is']('element'))&&_0x258a98['push'](_0x4e9ba6[_0x31a9('0x16')]);}this[_0x31a9('0x24')]=_0x258a98;}}