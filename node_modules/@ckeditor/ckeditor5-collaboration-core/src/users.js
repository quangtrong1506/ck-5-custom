/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x19a7=['config','invalid-license-key','useAnonymousUser','context','_getInitial','color','defineMe','_licenseKeyCheckInterval','trial-license-key-reached-limit-time','info','decorate','length','licenseKeyTrialLimit:operations','_id','getSelectionClass','Anonymous','requires','name','initials','_lastColor','trial-license-key-reached-limit-changes','charAt','ck-user__marker--','add','destroy','addUser','users','licenseKeyTrial','isAnonymous','toUpperCase','licenseKeyInvalid','getOperationAuthor','includes','anonymous-user','licenseKeyTrialLimit:time','_myId','licenseKey','ck-user__selection--','locale','licenseKeyValid','You\x20are\x20using\x20the\x20trial\x20version\x20of\x20CKEditor\x205\x20collaboration\x20plugin\x20with\x20limited\x20usage.\x20Make\x20sure\x20you\x20will\x20not\x20use\x20it\x20in\x20the\x20production\x20environment.','_isMe','has','getMarkerClass','users.colorsCount','users.anonymousUserId','_getNextColor','users-me-missing-user','users-add-invalid-id','getBackgroundColorClass','_locale','get','users-add-duplicated-id','_isAnonymous','users-me-already-defined','getUser','init','_addAnonymousUser','pluginName','trial-license-key-reached-limit-revisions'];(function(_0x47610a,_0x19a7ac){const _0x1495ef=function(_0x593831){while(--_0x593831){_0x47610a['push'](_0x47610a['shift']());}};_0x1495ef(++_0x19a7ac);}(_0x19a7,0x190));const _0x1495=function(_0x47610a,_0x19a7ac){_0x47610a=_0x47610a-0x0;let _0x1495ef=_0x19a7[_0x47610a];return _0x1495ef;};import{ContextPlugin as _0x1eb7d3}from'ckeditor5/src/core.js';import{Collection as _0x65548a,CKEditorError as _0x3f2c22}from'ckeditor5/src/utils.js';import _0x4cba61 from'./permissions.js';import{getTranslation as _0x397170}from'./utils/common-translations.js';import'../theme/usercolors.css';export default class l extends _0x1eb7d3{static get[_0x1495('0x12')](){return'Users';}static get[_0x1495('0x24')](){return[_0x4cba61];}constructor(_0x4cb194){super(_0x4cb194),this[_0x1495('0x17')]['config']['define'](_0x1495('0x5'),_0x1495('0x35')),this[_0x1495('0x17')][_0x1495('0x14')]['define'](_0x1495('0x4'),0x8),this[_0x1495('0x2e')]=new _0x65548a(),this[_0x1495('0xa')]=_0x4cb194[_0x1495('0x3a')],this[_0x1495('0x1b')]=null,this[_0x1495('0x27')]=0x0,this[_0x1495('0x37')]=null,this[_0x1495('0x1e')]('getOperationAuthor');}[_0x1495('0x10')](){const _0x4aa670=this[_0x1495('0x17')];this['licenseKey']=_0x4aa670[_0x1495('0x14')]['get'](_0x1495('0x38'));const _0x8628df=[_0x1495('0x2f'),_0x1495('0x32'),_0x1495('0x3b'),_0x1495('0x20'),_0x1495('0x36'),'licenseKeyTrialLimit:revisions'];this[_0x1495('0x1b')]=setInterval(()=>{let _0x298c50;for(const _0x4d74f7 in _0x4aa670){const _0x50cc85=_0x4aa670[_0x4d74f7];if(_0x8628df[_0x1495('0x34')](_0x50cc85)){delete _0x4aa670[_0x4d74f7],_0x298c50=_0x50cc85;break;}}if(_0x1495('0x32')===_0x298c50)throw clearInterval(this[_0x1495('0x1b')]),new _0x3f2c22(_0x1495('0x15'),null);if(_0x1495('0x2f')===_0x298c50&&console[_0x1495('0x1d')](_0x1495('0x0')),_0x1495('0x20')===_0x298c50)throw clearInterval(this['_licenseKeyCheckInterval']),new _0x3f2c22(_0x1495('0x28'),null);if(_0x1495('0x36')===_0x298c50)throw clearInterval(this[_0x1495('0x1b')]),new _0x3f2c22(_0x1495('0x1c'),null);if('licenseKeyTrialLimit:revisions'===_0x298c50)throw clearInterval(this[_0x1495('0x1b')]),new _0x3f2c22(_0x1495('0x13'),null);_0x1495('0x3b')===_0x298c50&&clearInterval(this[_0x1495('0x1b')]);},0x3e8),this['_addAnonymousUser']();}get['me'](){return null==this[_0x1495('0x37')]?null:this[_0x1495('0xf')](this['_myId']);}[_0x1495('0x2d')]({id:_0x2eebb6,name:_0x171d5a,..._0x1b0057}){if(!_0x2eebb6||'string'!=typeof _0x2eebb6)throw new _0x3f2c22(_0x1495('0x8'));if(this[_0x1495('0x2e')][_0x1495('0x2')](_0x2eebb6))throw new _0x3f2c22(_0x1495('0xc'),null,{'id':_0x2eebb6});const _0x54019f={..._0x1b0057,'id':_0x2eebb6,'name':a(this[_0x1495('0xa')],_0x171d5a),'color':this['_getNextColor']()};_0x54019f[_0x1495('0x25')]=a(this[_0x1495('0xa')],_0x54019f[_0x1495('0x25')]);const _0x30fd2c=new User(_0x54019f);return this[_0x1495('0x2e')][_0x1495('0x2b')](_0x30fd2c),_0x30fd2c;}[_0x1495('0xf')](_0x5dd2eb){return this[_0x1495('0x2e')][_0x1495('0xb')](_0x5dd2eb);}[_0x1495('0x16')](){const _0x946e6c=this[_0x1495('0x17')]['config'][_0x1495('0xb')](_0x1495('0x5'));this[_0x1495('0x37')]||this[_0x1495('0x1a')](_0x946e6c);}[_0x1495('0x1a')](_0x3d4ddb){if(this[_0x1495('0x37')])throw new _0x3f2c22(_0x1495('0xe'),null);const _0x2ba2fa=this[_0x1495('0xf')](_0x3d4ddb);if(!_0x2ba2fa)throw new _0x3f2c22(_0x1495('0x7'),null);this[_0x1495('0x37')]=_0x3d4ddb,_0x2ba2fa[_0x1495('0x1')]=!0x0;}[_0x1495('0x33')](){return this['me'];}[_0x1495('0x2c')](){super['destroy'](),clearInterval(this['_licenseKeyCheckInterval']);}[_0x1495('0x6')](){const _0x489343=this[_0x1495('0x17')][_0x1495('0x14')][_0x1495('0xb')](_0x1495('0x4'));return this['_lastColor']>=_0x489343&&(this[_0x1495('0x27')]=0x0),new u(this['_lastColor']++);}[_0x1495('0x11')](){const _0x584d75=this['context'][_0x1495('0x14')][_0x1495('0xb')](_0x1495('0x5'));this['addUser']({'id':_0x584d75,'name':_0x397170(this[_0x1495('0xa')],'Anonymous')})['_isAnonymous']=!0x0;}}export class User{constructor(_0x49ea3c){this['id']=_0x49ea3c['id'],this['color']=_0x49ea3c[_0x1495('0x19')],this[_0x1495('0x25')]=_0x49ea3c[_0x1495('0x25')],this['avatar']=_0x49ea3c['avatar'],this['_isAnonymous']=!0x1,this[_0x1495('0x1')]=!0x1;}get[_0x1495('0x30')](){return this[_0x1495('0xd')];}get['isMe'](){return this[_0x1495('0x1')];}get[_0x1495('0x26')](){const _0x489dfb=this[_0x1495('0x25')]['split']('\x20');return 0x1===_0x489dfb[_0x1495('0x1f')]?this['_getInitial'](_0x489dfb[0x0]):this[_0x1495('0x18')](_0x489dfb[0x0])+this[_0x1495('0x18')](_0x489dfb[_0x489dfb[_0x1495('0x1f')]-0x1]);}[_0x1495('0x18')](_0x2d2732){return _0x2d2732[_0x1495('0x29')](0x0)[_0x1495('0x31')]();}}function a(_0x5ca705,_0x3136f5=''){return''==(_0x3136f5=_0x3136f5['trim']())?_0x397170(_0x5ca705,_0x1495('0x23')):_0x3136f5;}class u{constructor(_0x5c5a02){this[_0x1495('0x21')]=_0x5c5a02;}[_0x1495('0x9')](){return'ck-user__bg-color--'+this['_id'];}[_0x1495('0x22')](){return _0x1495('0x39')+this[_0x1495('0x21')];}[_0x1495('0x3')](){return _0x1495('0x2a')+this[_0x1495('0x21')];}}